<h2 class="text-2xl font-semibold text-gray-900 mb-6">Optimizations</h2>

<div class="bg-white rounded-lg border border-gray-200 overflow-hidden">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Project</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">User</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Efficiency</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Sheets</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Created</th>
        <th class="px-5 py-3"></th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-100">
      <% @optimizations.each do |opt| %>
        <tr class="hover:bg-gray-50">
          <td class="px-5 py-3 text-sm">
            <%= link_to opt.project.name.presence || "Untitled", admin_project_path(opt.project), class: "text-blue-600 hover:text-blue-800" %>
          </td>
          <td class="px-5 py-3 text-sm text-gray-500">
            <% if opt.project.user %>
              <%= link_to opt.project.user.email, admin_user_path(opt.project.user), class: "text-blue-600 hover:text-blue-800" %>
            <% else %>
              <span class="text-gray-400">Guest</span>
            <% end %>
          </td>
          <td class="px-5 py-3 text-sm text-gray-900"><%= opt.status %></td>
          <td class="px-5 py-3 text-sm text-gray-500"><%= opt.efficiency ? number_to_percentage(opt.efficiency, precision: 1) : "—" %></td>
          <td class="px-5 py-3 text-sm text-gray-500"><%= opt.sheets_count || "—" %></td>
          <td class="px-5 py-3 text-sm text-gray-500"><%= opt.created_at.strftime("%b %d, %Y") %></td>
          <td class="px-5 py-3 text-right">
            <%= link_to "View", admin_optimization_path(opt), class: "text-sm text-blue-600 hover:text-blue-800" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<%= admin_pagination %>
