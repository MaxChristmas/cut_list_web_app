<% content_for(:title) { t("privacy_policy.page_title") } %>

<div class="h-full overflow-y-auto">
  <div class="max-w-3xl mx-auto px-4 py-8 md:py-12">
    <div class="mb-8">
      <%= link_to root_path, class: "inline-flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 transition-colors" do %>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"/>
        </svg>
        <%= t("settings.back") %>
      <% end %>
    </div>

    <h1 class="text-2xl font-bold text-gray-900 mb-2"><%= t("privacy_policy.title") %></h1>
    <p class="text-sm text-gray-500 mb-8"><%= t("privacy_policy.last_updated") %></p>

    <div class="max-w-none space-y-8 text-sm text-gray-600">
      <p><%= t("privacy_policy.intro") %></p>

      <%# Section 1 — Data Controller %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">1. <%= t("privacy_policy.data_controller.title") %></h2>
        <p class="mb-3"><%= t("privacy_policy.data_controller.body") %></p>
        <div class="p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm space-y-1">
          <p class="font-medium text-gray-900">Noventi SARL</p>
          <p>SIREN: 931 419 717</p>
          <p>Nantes, France</p>
          <p>Email: <a href="mailto:contact@cutoptima.com" class="text-blue-600 hover:text-blue-800">contact@cutoptima.com</a></p>
        </div>
      </section>

      <%# Section 2 — Data Collected %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">2. <%= t("privacy_policy.data_collected.title") %></h2>
        <p class="mb-3"><%= t("privacy_policy.data_collected.body") %></p>
        <div class="overflow-x-auto rounded-lg border border-gray-200">
          <table class="w-full text-sm">
            <thead class="bg-gray-50 text-gray-500">
              <tr>
                <th class="text-left px-3 py-2 font-medium"><%= t("privacy_policy.data_collected.table.data") %></th>
                <th class="text-left px-3 py-2 font-medium"><%= t("privacy_policy.data_collected.table.purpose") %></th>
                <th class="text-left px-3 py-2 font-medium"><%= t("privacy_policy.data_collected.table.legal_basis") %></th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
              <tr>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.email.data") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.email.purpose") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.email.basis") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.password.data") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.password.purpose") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.password.basis") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.oauth.data") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.oauth.purpose") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.oauth.basis") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.projects.data") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.projects.purpose") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.projects.basis") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.payment.data") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.payment.purpose") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.payment.basis") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.reports.data") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.reports.purpose") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.data_collected.rows.reports.basis") %></td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <%# Section 3 — Purposes %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">3. <%= t("privacy_policy.purposes.title") %></h2>
        <ul class="list-disc list-inside space-y-1">
          <li><%= t("privacy_policy.purposes.items.service") %></li>
          <li><%= t("privacy_policy.purposes.items.auth") %></li>
          <li><%= t("privacy_policy.purposes.items.payment") %></li>
          <li><%= t("privacy_policy.purposes.items.communication") %></li>
          <li><%= t("privacy_policy.purposes.items.security") %></li>
          <li><%= t("privacy_policy.purposes.items.improvement") %></li>
        </ul>
      </section>

      <%# Section 4 — Legal Basis %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">4. <%= t("privacy_policy.legal_basis.title") %></h2>
        <p><%= t("privacy_policy.legal_basis.body") %></p>
        <ul class="list-disc list-inside space-y-1 mt-2">
          <li><%= t("privacy_policy.legal_basis.items.contract") %></li>
          <li><%= t("privacy_policy.legal_basis.items.consent") %></li>
          <li><%= t("privacy_policy.legal_basis.items.legitimate") %></li>
          <li><%= t("privacy_policy.legal_basis.items.legal") %></li>
        </ul>
      </section>

      <%# Section 5 — Data Recipients %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">5. <%= t("privacy_policy.recipients.title") %></h2>
        <p class="mb-3"><%= t("privacy_policy.recipients.body") %></p>
        <div class="overflow-x-auto rounded-lg border border-gray-200">
          <table class="w-full text-sm">
            <thead class="bg-gray-50 text-gray-500">
              <tr>
                <th class="text-left px-3 py-2 font-medium"><%= t("privacy_policy.recipients.table.provider") %></th>
                <th class="text-left px-3 py-2 font-medium"><%= t("privacy_policy.recipients.table.purpose") %></th>
                <th class="text-left px-3 py-2 font-medium"><%= t("privacy_policy.recipients.table.location") %></th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-100">
              <tr>
                <td class="px-3 py-2 font-medium text-gray-900">Stripe</td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.stripe") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.stripe_location") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2 font-medium text-gray-900">Brevo</td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.brevo") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.brevo_location") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2 font-medium text-gray-900">Google</td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.google") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.google_location") %></td>
              </tr>
              <tr>
                <td class="px-3 py-2 font-medium text-gray-900">OVHcloud</td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.ovh") %></td>
                <td class="px-3 py-2"><%= t("privacy_policy.recipients.rows.ovh_location") %></td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <%# Section 6 — International Transfers %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">6. <%= t("privacy_policy.transfers.title") %></h2>
        <p><%= t("privacy_policy.transfers.body") %></p>
      </section>

      <%# Section 7 — Retention %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">7. <%= t("privacy_policy.retention.title") %></h2>
        <p class="mb-3"><%= t("privacy_policy.retention.body") %></p>
        <ul class="list-disc list-inside space-y-1">
          <li><%= t("privacy_policy.retention.items.account") %></li>
          <li><%= t("privacy_policy.retention.items.projects") %></li>
          <li><%= t("privacy_policy.retention.items.payment") %></li>
          <li><%= t("privacy_policy.retention.items.cookies") %></li>
        </ul>
      </section>

      <%# Section 8 — Your Rights %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">8. <%= t("privacy_policy.rights.title") %></h2>
        <p class="mb-3"><%= t("privacy_policy.rights.body") %></p>
        <ul class="list-disc list-inside space-y-1">
          <li><strong><%= t("privacy_policy.rights.items.access.name") %></strong> — <%= t("privacy_policy.rights.items.access.desc") %></li>
          <li><strong><%= t("privacy_policy.rights.items.rectification.name") %></strong> — <%= t("privacy_policy.rights.items.rectification.desc") %></li>
          <li><strong><%= t("privacy_policy.rights.items.erasure.name") %></strong> — <%= t("privacy_policy.rights.items.erasure.desc") %></li>
          <li><strong><%= t("privacy_policy.rights.items.portability.name") %></strong> — <%= t("privacy_policy.rights.items.portability.desc") %></li>
          <li><strong><%= t("privacy_policy.rights.items.restriction.name") %></strong> — <%= t("privacy_policy.rights.items.restriction.desc") %></li>
          <li><strong><%= t("privacy_policy.rights.items.objection.name") %></strong> — <%= t("privacy_policy.rights.items.objection.desc") %></li>
          <li><strong><%= t("privacy_policy.rights.items.withdrawal.name") %></strong> — <%= t("privacy_policy.rights.items.withdrawal.desc") %></li>
        </ul>
        <p class="mt-3"><%= t("privacy_policy.rights.exercise") %></p>
        <p class="mt-2"><%= t("privacy_policy.rights.cnil") %></p>
      </section>

      <%# Section 9 — Cookies %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">9. <%= t("privacy_policy.cookies.title") %></h2>
        <p>
          <%= t("privacy_policy.cookies.body") %>
          <%= link_to t("cookies_policy.link"), cookies_policy_path, class: "text-blue-600 hover:text-blue-800 underline" %>.
        </p>
      </section>

      <%# Section 10 — Security %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">10. <%= t("privacy_policy.security.title") %></h2>
        <p><%= t("privacy_policy.security.body") %></p>
      </section>

      <%# Section 11 — Updates %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">11. <%= t("privacy_policy.updates.title") %></h2>
        <p><%= t("privacy_policy.updates.body") %></p>
      </section>

      <%# Section 12 — Contact %>
      <section>
        <h2 class="text-lg font-semibold text-gray-900 mb-3">12. <%= t("privacy_policy.contact.title") %></h2>
        <p><%= t("privacy_policy.contact.body") %></p>
        <div class="mt-3 p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm space-y-1">
          <p class="font-medium text-gray-900">Noventi SARL</p>
          <p>Nantes, France</p>
          <p>Email: <a href="mailto:contact@cutoptima.com" class="text-blue-600 hover:text-blue-800">contact@cutoptima.com</a></p>
          <p>Website: <a href="https://cutoptima.com" class="text-blue-600 hover:text-blue-800">cutoptima.com</a></p>
        </div>
        <p class="mt-3"><%= t("privacy_policy.contact.cnil") %></p>
      </section>
    </div>
  </div>
</div>
